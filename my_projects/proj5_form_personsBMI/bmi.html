<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-uWxY/CJNBR+1zjPWmfnSnVxwRheevXITnMqoEIeG1LJrdI0GlVs/9cVSyPYXdcSF" crossorigin="anonymous">
</head>

<body>


    <div class="container">
        <p>Calculate Bmi</p>
        <div class="row justify-content-start">
            <div class="col-1">
                <label for="name">name</label>
            </div>
            <div class="col-1">
                <input type="text" id="name" />
            </div>
        </div>

        <div class="row justify-content-start">
            <div class="col-1">
                <label for="gender">gender</label>
            </div>
            <div class="col-1">
                <select type="text" id="gender">
                    <option value="M">M</option>
                    <option value="F">F</option>
                    <option value="Other">Other</option>

                </select>
            </div>
        </div>

        <div class="row justify-content-start">
            <div class="col-1">
                <label for="weight">weight</label>
            </div>
            <div class="col-1">
                <input type="number" id="weight" />
            </div>
        </div>
        <div class="row justify-content-start">
            <div class="col-1">
                <label for="height">height</label>
            </div>
            <div class="col-1">
                <input type="number" id="height" />
            </div>
        </div>
    </div>
    <div class="container">
        <button type="button" onclick="createDatabase()" class="btn btn-outline-primary">Create person</button>
        <button type="button" onclick="Calculate()" class="btn btn-outline-primary">Calculate BMI</button>
        <button type="button" onclick="deleteDatabase()" class="btn btn-outline-primary">Delete Persons</button>
        <button type="button" onclick="displayDatabase()" class="btn btn-outline-primary">Display Database</button>
    </div>
    <div id="showDatabase">
    </div>
    <div class="container" id="table">
        <table >
            </table>
    </div>
    <div id="showBodyType"></div>



    <script>
        var database = [];
        var nr = 0;
        function displayDatabase() {
            var showDatabase = document.getElementById("showDatabase");
            var txt = "";
            showDatabase.innerHTML = "";
            if (database.length == 0)
                showDatabase.innerHTML = ("The database is empty");
            

           /* for (var i = 0; i < database.length; i++) {


                showDatabase.innerHTML += ("name: " + database[i].name + ',' + "gender: " + database[i].gender + ',' + "height: " + database[i].height + ',' + "weight: " + database[i].weight + '<br />');
            }*/
            buildTable(document.getElementById('table'));

        }
        function buildTable(container) {
            var table = document.createElement('table');
            var thead = document.createElement('thead');
            var tbody = document.createElement('tbody');
            var labels = ["Name", "Gender", "Height", "Weight"];
            var theadTr = document.createElement('tr');
            table.setAttribute('class', 'table table-dark');
            for (var i = 0; i < labels.length; i++) {
                var theadTh = document.createElement('th');
                theadTh.innerHTML = labels[i];
                theadTr.appendChild(theadTh);
            }
            thead.appendChild(theadTr);
            table.appendChild(thead);

            for (var j = 0; j < database.length; j++) {
                var tbodyTr = document.createElement('tr');
                var object = Object.values(database[j]); //object to array
                for (k = 0; k < object.length; k++) {
                    var tbodyTd = document.createElement('td');
                    tbodyTd.innerHTML = object[k];
                    tbodyTr.appendChild(tbodyTd);
                }
                tbody.appendChild(tbodyTr);
            }
            table.appendChild(tbody); 
            container.appendChild(table);
        }

        function createDatabase() {
            var person = {
                name: document.getElementById("name").value,
                gender: document.getElementById("gender").value,
                height: parseFloat(document.getElementById("height").value),
                weight: parseFloat(document.getElementById("weight").value)
            };
            if (person.height > 2.5)
                person.height /= 100; // convert in meters if the imput value is in cm

            database.push(person);
        }




        function deleteDatabase() {
            database.splice(0, database.length);
        }


        function calculateBMI(person) {
            return person.weight / (person.height * person.height);
        }

        function determineBodyType(person) {
            var actual = person;
            var BMI = calculateBMI(actual);
            var underweight = BMI < 18.5;
            var normal = BMI >= 18.5 && BMI < 25;
            var overweight = BMI >= 25 && BMI < 30;
            if (underweight) {
                return "underweight";
            } else if (normal) {
                return "normal";
            } else if (overweight) {
                return "overweight";
            }

            return "obese";
        }
        //Calculate()->determineBodyType->calculateBMI()->createPerson()
        function Calculate() {
            var bodyType = document.getElementById("showBodyType");
            bodyType.innerHTML = "";
            for (var i = 0; database.length; i++) {
                var person = database[i];
                bodyType.innerHTML += person.name + ' ' + determineBodyType(person) + '<br />';
                //bodyType.innerText = `${
                // createPerson().name
                // } body type: ${determineBodyType()}`;
            }
        }
    </script>
</body>

</html>

